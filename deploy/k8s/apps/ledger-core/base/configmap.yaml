apiVersion: v1
kind: ConfigMap
metadata:
  name: ledger-core-config
  labels:
    app: ledger-core
    app.kubernetes.io/name: ledger-core
    app.kubernetes.io/component: backend
    app.kubernetes.io/part-of: double-entry-ledger
data:
  # JPA/Hibernate settings
  SPRING_JPA_HIBERNATE_DDL_AUTO: "update"
  SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL: "true"

  # HikariCP pool settings
  SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE: "20"

  # Kafka settings
  SPRING_KAFKA_TEMPLATE_DEFAULT_TOPIC: "transaction-events"

  # Outbox publisher settings
  OUTBOX_PUBLISHER_POLL_INTERVAL_MS: "1000"
  OUTBOX_PUBLISHER_BATCH_SIZE: "50"
  OUTBOX_RETRY_INITIAL_INTERVAL_MS: "1000"
  OUTBOX_RETRY_MULTIPLIER: "2.0"
  OUTBOX_RETRY_MAX_RETRIES: "5"
  OUTBOX_RETRY_JITTER_MS: "1000"
  OUTBOX_METRICS_UPDATE_INTERVAL_MS: "10000"

  # gRPC settings
  GRPC_SERVER_PORT: "9098"

  # Logging
  LOGGING_LEVEL_ROOT: "INFO"
  LOGGING_LEVEL_ORG_SPRINGFRAMEWORK: "INFO"
  LOGGING_LEVEL_ORG_HIBERNATE_SQL: "INFO"

  # Actuator endpoints
  MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE: "health,info,prometheus,metrics"
  MANAGEMENT_PROMETHEUS_METRICS_EXPORT_ENABLED: "true"
