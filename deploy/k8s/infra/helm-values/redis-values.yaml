# Redis Helm Values - Development Environment
# Chart: oci://registry-1.docker.io/bitnamicharts/redis
# Install: helm install redis oci://registry-1.docker.io/bitnamicharts/redis -f redis-values.yaml -n ledger-dev

image:
  tag: "7-alpine"
  pullPolicy: IfNotPresent

# Architecture: standalone for dev, replication for prod
architecture: standalone

# Disable authentication for dev (enable in production)
auth:
  enabled: false

master:
  # Persistence configuration
  persistence:
    enabled: true
    size: 1Gi

  # Resource limits for Minikube (dev environment)
  resources:
    requests:
      memory: "64Mi"
      cpu: "50m"
    limits:
      memory: "128Mi"
      cpu: "250m"

  # Redis configuration matching docker-compose
  configuration: |
    appendonly yes
    appendfsync everysec
    maxmemory 100mb
    maxmemory-policy allkeys-lru

  # Service configuration
  service:
    type: ClusterIP
    ports:
      redis: 6379

# Metrics for Prometheus scraping
metrics:
  enabled: true
  serviceMonitor:
    enabled: true
    namespace: ledger-dev
    labels:
      release: prometheus
